<!DOCTYPE html>
<html lang="zh-TW">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>瀏覽器資訊檢測</title>
		<!-- <script src="https://cdn.tailwindcss.com"></script> -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
		<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
		<link rel="stylesheet" href="/style.css" />
		<link rel="stylesheet" href="/tailwindcss.css" />
	</head>
	<body class="bg-gray-50 min-h-screen">
		<div class="container mx-auto px-4 py-8 max-w-4xl" id="content-to-export">
			<div class="text-center mb-8">
				<h1 class="text-3xl font-bold text-blue-600 mb-2">
					<i class="fas fa-info-circle mr-2"></i>
					瀏覽器資訊檢測
				</h1>
				<p class="text-gray-600">顯示當前瀏覽器的詳細資訊</p>
			</div>

			<!-- 主要資訊卡片 -->
			<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
				<!-- 視窗尺寸卡片 -->
				<div class="info-card bg-white rounded-xl shadow-md p-6">
					<div class="flex items-center mb-4">
						<div class="p-3 rounded-full bg-blue-100 text-blue-600 mr-3">
							<i class="fas fa-ruler-combined responsive-icon"></i>
						</div>
						<h2 class="text-xl font-semibold text-gray-800">視窗尺寸</h2>
					</div>
					<div class="space-y-4">
						<div class="flex justify-between items-center">
							<span class="text-gray-600">寬度 (px):</span>
							<span id="window-width" class="dimension-display">--</span>
						</div>
						<div class="flex justify-between items-center">
							<span class="text-gray-600">高度 (px):</span>
							<span id="window-height" class="dimension-display">--</span>
						</div>
						<div class="mt-4 p-3 bg-gray-100 rounded-lg">
							<div class="text-sm text-gray-600 mb-1">視窗比例 (寬:高):</div>
							<div id="window-ratio" class="font-medium text-gray-800">--</div>
						</div>
					</div>
				</div>

				<!-- 螢幕尺寸卡片 -->
				<div class="info-card bg-white rounded-xl shadow-md p-6">
					<div class="flex items-center mb-4">
						<div class="p-3 rounded-full bg-green-100 text-green-600 mr-3">
							<i class="fas fa-desktop"></i>
						</div>
						<h2 class="text-xl font-semibold text-gray-800">螢幕尺寸</h2>
					</div>
					<div class="space-y-4">
						<div class="flex justify-between items-center">
							<span class="text-gray-600">螢幕寬度 (px):</span>
							<span id="screen-width" class="font-bold text-green-600 text-2xl">--</span>
						</div>
						<div class="flex justify-between items-center">
							<span class="text-gray-600">螢幕高度 (px):</span>
							<span id="screen-height" class="font-bold text-green-600 text-2xl">--</span>
						</div>
						<div class="flex justify-between items-center">
							<span class="text-gray-600">色彩深度:</span>
							<span id="color-depth" class="font-bold text-gray-800">--</span>
						</div>
						<div class="flex justify-between items-center">
							<span class="text-gray-600">像素比例:</span>
							<span id="pixel-ratio" class="font-bold text-gray-800">--</span>
						</div>
					</div>
				</div>
			</div>

			<!-- 詳細資訊區塊 -->
			<div class="bg-white rounded-xl shadow-md p-6 mb-8">
				<h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
					<i class="fas fa-info-circle text-blue-500 mr-2"></i>
					詳細瀏覽器資訊
				</h2>

				<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
					<div>
						<h3 class="font-medium text-gray-700 mb-2">瀏覽器資訊</h3>
						<div class="space-y-2">
							<div class="flex justify-between">
								<span class="text-gray-600">瀏覽器名稱:</span>
								<span id="browser-name" class="font-medium">--</span>
							</div>
							<div class="flex justify-between">
								<span class="text-gray-600">瀏覽器版本:</span>
								<span id="browser-version" class="font-medium">--</span>
							</div>
							<div class="flex flex-col">
								<span class="text-gray-600">使用者代理:</span>
								<div id="user-agent" class="user-agent-full">--</div>
							</div>
						</div>
					</div>

					<div>
						<h3 class="font-medium text-gray-700 mb-2">系統資訊</h3>
						<div class="space-y-2">
							<div class="flex justify-between">
								<span class="text-gray-600">作業系統:</span>
								<span id="os" class="font-medium">--</span>
							</div>
							<div class="flex justify-between">
								<span class="text-gray-600">CPU核心數:</span>
								<span id="cpu-cores" class="font-medium">--</span>
							</div>
							<div class="flex justify-between">
								<span class="text-gray-600">裝置類型:</span>
								<span id="device-type" class="font-medium">--</span>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- 響應式測試區塊 -->
			<div class="bg-white rounded-xl shadow-md p-6">
				<h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
					<i class="fas fa-mobile-alt text-purple-500 mr-2"></i>
					響應式測試
				</h2>

				<div class="mb-4">
					<div class="flex justify-between mb-1">
						<span class="text-sm text-gray-600">當前視窗寬度</span>
						<span id="responsive-width" class="text-sm font-medium">-- px</span>
					</div>
					<div class="w-full bg-gray-200 rounded-full h-4">
						<div
							id="responsive-bar"
							class="bg-gradient-to-r from-blue-500 to-purple-600 h-4 rounded-full"
							style="width: 0%"
						></div>
					</div>
				</div>

				<div class="grid grid-cols-5 gap-2 text-center text-xs">
					<div class="p-1 bg-gray-100 rounded">
						手機
						<br />
						≤576px
					</div>
					<div class="p-1 bg-gray-100 rounded">
						平板
						<br />
						577-768px
					</div>
					<div class="p-1 bg-gray-100 rounded">
						小桌機
						<br />
						769-992px
					</div>
					<div class="p-1 bg-gray-100 rounded">
						桌機
						<br />
						993-1200px
					</div>
					<div class="p-1 bg-gray-100 rounded">
						大桌機
						<br />
						≥1201px
					</div>
				</div>

				<div class="mt-4">
					<h3 class="font-medium text-gray-700 mb-2">主流前端框架對應系統</h3>
					<p class="text-sm text-gray-600 mb-3">
						當前視窗寬度
						<span id="current-width-display" class="font-medium text-blue-600">-- px</span>
						應對應以下格線系統中的 class
					</p>

					<div class="framework-grid" id="framework-grid">
						<div class="framework-item">
							<div class="framework-name">Bootstrap</div>
							<div class="framework-system">Grid</div>
							<div class="current-class-info">
								<span class="current-class-label">當前尺寸對應:</span>
								<span class="class-name">--</span>
							</div>
						</div>
						<div class="framework-item">
							<div class="framework-name">Foundation (ZURB)</div>
							<div class="framework-system">XY Grid</div>
							<div class="current-class-info">
								<span class="current-class-label">當前尺寸對應:</span>
								<span class="class-name">--</span>
							</div>
						</div>
						<div class="framework-item">
							<div class="framework-name">Bulma</div>
							<div class="framework-system">Columns</div>
							<div class="current-class-info">
								<span class="current-class-label">當前尺寸對應:</span>
								<span class="class-name">--</span>
							</div>
						</div>
						<div class="framework-item">
							<div class="framework-name">Materialize</div>
							<div class="framework-system">Grid System</div>
							<div class="current-class-info">
								<span class="current-class-label">當前尺寸對應:</span>
								<span class="class-name">--</span>
							</div>
						</div>
						<div class="framework-item">
							<div class="framework-name">Semantic UI</div>
							<div class="framework-system">Grid</div>
							<div class="current-class-info">
								<span class="current-class-label">當前尺寸對應:</span>
								<span class="class-name">--</span>
							</div>
						</div>
						<div class="framework-item">
							<div class="framework-name">UIkit</div>
							<div class="framework-system">Grid</div>
							<div class="current-class-info">
								<span class="current-class-label">當前尺寸對應:</span>
								<span class="class-name">--</span>
							</div>
						</div>
						<div class="framework-item">
							<div class="framework-name">Tailwind CSS</div>
							<div class="framework-system">CSS Grid & Flex Utilities</div>
							<div class="current-class-info">
								<span class="current-class-label">當前尺寸對應:</span>
								<span class="class-name">--</span>
							</div>
						</div>
						<div class="framework-item">
							<div class="framework-name">Material-UI (MUI)</div>
							<div class="framework-system">Grid (Container / Item)</div>
							<div class="current-class-info">
								<span class="current-class-label">當前尺寸對應:</span>
								<span class="class-name">--</span>
							</div>
						</div>
						<div class="framework-item">
							<div class="framework-name">Ant Design</div>
							<div class="framework-system">Grid (Row / Col)</div>
							<div class="current-class-info">
								<span class="current-class-label">當前尺寸對應:</span>
								<span class="class-name">--</span>
							</div>
						</div>
						<div class="framework-item">
							<div class="framework-name">Vuetify</div>
							<div class="framework-system">Grid (v-row / v-col)</div>
							<div class="current-class-info">
								<span class="current-class-label">當前尺寸對應:</span>
								<span class="class-name">--</span>
							</div>
						</div>
						<div class="framework-item">
							<div class="framework-name">Element UI</div>
							<div class="framework-system">Grid (el-row / el-col)</div>
							<div class="current-class-info">
								<span class="current-class-label">當前尺寸對應:</span>
								<span class="class-name">--</span>
							</div>
						</div>
						<div class="framework-item">
							<div class="framework-name">Pure.css</div>
							<div class="framework-system">Pure Grid</div>
							<div class="current-class-info">
								<span class="current-class-label">當前尺寸對應:</span>
								<span class="class-name">--</span>
							</div>
						</div>
					</div>
				</div>

				<div class="mt-4 p-3 bg-blue-50 rounded-lg border border-blue-100">
					<div class="flex items-center">
						<i class="fas fa-lightbulb text-yellow-500 mr-2"></i>
						<p id="responsive-tip" class="text-sm text-blue-800">調整視窗大小以查看響應式變化</p>
					</div>
				</div>
			</div>

			<!-- 版權資訊 -->
			<div class="text-center mt-8 text-sm text-gray-500">
				<p>
					© 2023 瀏覽器資訊檢測工具 | 最後更新:
					<span id="update-time"></span>
				</p>
			</div>
		</div>

		<!-- 浮動按鈕 -->
		<div class="float-btn" title="匯出JPG" onclick="exportToJPG()">
			<i class="fas fa-camera text-2xl"></i>
		</div>

		<script>
			// 頁面載入完成後立即執行
			document.addEventListener("DOMContentLoaded", function () {
				getBrowserInfo();

				// 監聽視窗大小變化
				window.addEventListener("resize", function () {
					getBrowserInfo();
				});
			});

			// 獲取瀏覽器資訊
			function getBrowserInfo() {
				// 視窗尺寸
				const width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
				const height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;

				// 螢幕尺寸
				const screenWidth = window.screen.width;
				const screenHeight = window.screen.height;
				const colorDepth = window.screen.colorDepth;
				const pixelRatio = window.devicePixelRatio || 1;

				// 計算寬高比
				const ratio = (width / height).toFixed(2);

				// 更新視窗尺寸顯示
				document.getElementById("window-width").textContent = width;
				document.getElementById("window-height").textContent = height;
				document.getElementById("window-ratio").textContent = `${ratio}:1`;

				// 更新螢幕資訊
				document.getElementById("screen-width").textContent = screenWidth;
				document.getElementById("screen-height").textContent = screenHeight;
				document.getElementById("color-depth").textContent = `${colorDepth}位元`;
				document.getElementById("pixel-ratio").textContent = pixelRatio;

				// 更新響應式條
				updateResponsiveBar(width);

				// 獲取瀏覽器名稱和版本
				detectBrowser();

				// 獲取作業系統資訊
				detectOS();

				// 獲取CPU核心數
				detectCPU();

				// 檢測裝置類型
				detectDeviceType();

				// 更新時間
				document.getElementById("update-time").textContent = new Date().toLocaleString();

				// 更新框架對應的class
				updateFrameworkClasses(width);
			}

			// 更新框架對應的class
			function updateFrameworkClasses(width) {
				document.getElementById("current-width-display").textContent = width + " px";

				// 根據寬度確定當前尺寸
				let size = "";
				if (width <= 576) {
					size = "xs";
				} else if (width <= 768) {
					size = "sm";
				} else if (width <= 992) {
					size = "md";
				} else if (width <= 1200) {
					size = "lg";
				} else {
					size = "xl";
				}

				// 更新每個框架的當前class
				const frameworkItems = document.querySelectorAll(".framework-item");
				frameworkItems.forEach((item) => {
					const frameworkName = item.querySelector(".framework-name").textContent;
					const classNameElement = item.querySelector(".class-name");

					// 根據框架名稱和尺寸設置對應的class
					classNameElement.textContent = getFrameworkClass(frameworkName, size);

					// 根據當前寬度設置高亮
					if (
						(width <= 576 && (frameworkName === "Bootstrap" || frameworkName === "Foundation (ZURB)")) ||
						(width > 576 && width <= 768 && (frameworkName === "Bulma" || frameworkName === "Materialize")) ||
						(width > 768 && width <= 992 && (frameworkName === "Semantic UI" || frameworkName === "UIkit")) ||
						(width > 992 &&
							width <= 1200 &&
							(frameworkName === "Tailwind CSS" || frameworkName === "Material-UI (MUI)")) ||
						(width > 1200 && (frameworkName === "Ant Design" || frameworkName === "Vuetify"))
					) {
						item.classList.add("current-class");
					} else {
						item.classList.remove("current-class");
					}
				});
			}

			// 根據框架名稱和尺寸返回對應的class
			function getFrameworkClass(frameworkName, size) {
				const classes = {
					Bootstrap: {
						xs: "col-* (手機)",
						sm: "col-sm-* (平板)",
						md: "col-md-* (小桌機)",
						lg: "col-lg-* (桌機)",
						xl: "col-xl-* (大桌機)",
					},
					"Foundation (ZURB)": {
						xs: "small-* (手機)",
						sm: "medium-* (平板)",
						md: "large-* (小桌機)",
						lg: "xlarge-* (桌機)",
						xl: "xxlarge-* (大桌機)",
					},
					Bulma: {
						xs: "is-*-mobile (手機)",
						sm: "is-*-tablet (平板)",
						md: "is-*-desktop (小桌機)",
						lg: "is-*-widescreen (桌機)",
						xl: "is-*-fullhd (大桌機)",
					},
					Materialize: {
						xs: "col s* (手機)",
						sm: "col m* (平板)",
						md: "col l* (小桌機)",
						lg: "col xl* (桌機)",
						xl: "col xxl* (大桌機)",
					},
					"Semantic UI": {
						xs: "mobile (手機)",
						sm: "tablet (平板)",
						md: "small monitor (小桌機)",
						lg: "large monitor (桌機)",
						xl: "widescreen (大桌機)",
					},
					UIkit: {
						xs: "uk-width-*-small (手機)",
						sm: "uk-width-*-medium (平板)",
						md: "uk-width-*-large (小桌機)",
						lg: "uk-width-*-xlarge (桌機)",
						xl: "uk-width-*-xxlarge (大桌機)",
					},
					"Tailwind CSS": {
						xs: "sm:* (手機)",
						sm: "md:* (平板)",
						md: "lg:* (小桌機)",
						lg: "xl:* (桌機)",
						xl: "2xl:* (大桌機)",
					},
					"Material-UI (MUI)": {
						xs: "xs (手機)",
						sm: "sm (平板)",
						md: "md (小桌機)",
						lg: "lg (桌機)",
						xl: "xl (大桌機)",
					},
					"Ant Design": {
						xs: "xs (手機)",
						sm: "sm (平板)",
						md: "md (小桌機)",
						lg: "lg (桌機)",
						xl: "xl (大桌機)",
					},
					Vuetify: {
						xs: "xs (手機)",
						sm: "sm (平板)",
						md: "md (小桌機)",
						lg: "lg (桌機)",
						xl: "xl (大桌機)",
					},
					"Element UI": {
						xs: "xs (手機)",
						sm: "sm (平板)",
						md: "md (小桌機)",
						lg: "lg (桌機)",
						xl: "xl (大桌機)",
					},
					"Pure.css": {
						xs: "pure-u-* (手機)",
						sm: "pure-u-sm-* (平板)",
						md: "pure-u-md-* (小桌機)",
						lg: "pure-u-lg-* (桌機)",
						xl: "pure-u-xl-* (大桌機)",
					},
				};

				return classes[frameworkName]?.[size] || "--";
			}

			// 更新響應式進度條
			function updateResponsiveBar(width) {
				const bar = document.getElementById("responsive-bar");
				const responsiveWidth = document.getElementById("responsive-width");
				const responsiveTip = document.getElementById("responsive-tip");

				responsiveWidth.textContent = `${width} px`;

				// 計算進度條百分比 (最大設為2000px)
				const percent = Math.min((width / 2000) * 100, 100);
				bar.style.width = `${percent}%`;

				// 根據寬度給出提示
				if (width <= 576) {
					responsiveTip.textContent = "當前為手機尺寸 (≤576px) - 適合移動設備瀏覽";
				} else if (width <= 768) {
					responsiveTip.textContent = "當前為平板尺寸 (577-768px) - 適合平板設備瀏覽";
				} else if (width <= 992) {
					responsiveTip.textContent = "當前為小桌機尺寸 (769-992px) - 適合小型桌面瀏覽";
				} else if (width <= 1200) {
					responsiveTip.textContent = "當前為桌機尺寸 (993-1200px) - 適合標準桌面瀏覽";
				} else {
					responsiveTip.textContent = "當前為大桌機尺寸 (≥1201px) - 適合大屏幕瀏覽";
				}
			}

			// 檢測瀏覽器類型
			function detectBrowser() {
				const userAgent = navigator.userAgent;
				document.getElementById("user-agent").textContent = userAgent;

				let browserName = "未知瀏覽器";
				let browserVersion = "未知版本";

				// 檢測瀏覽器
				if (userAgent.indexOf("Firefox") > -1) {
					browserName = "Mozilla Firefox";
					browserVersion = userAgent.match(/Firefox\/(\d+\.\d+)/)[1];
				} else if (userAgent.indexOf("SamsungBrowser") > -1) {
					browserName = "Samsung Browser";
					browserVersion = userAgent.match(/SamsungBrowser\/(\d+\.\d+)/)[1];
				} else if (userAgent.indexOf("Opera") > -1 || userAgent.indexOf("OPR") > -1) {
					browserName = "Opera";
					browserVersion = userAgent.match(/(?:Opera|OPR)\/(\d+\.\d+)/)[1];
				} else if (userAgent.indexOf("Trident") > -1) {
					browserName = "Internet Explorer";
					browserVersion = userAgent.match(/rv:(\d+\.\d+)/)[1];
				} else if (userAgent.indexOf("Edge") > -1) {
					browserName = "Microsoft Edge";
					browserVersion = userAgent.match(/Edge\/(\d+\.\d+)/)[1];
				} else if (userAgent.indexOf("Chrome") > -1) {
					browserName = "Google Chrome";
					browserVersion = userAgent.match(/Chrome\/(\d+\.\d+)/)[1];
				} else if (userAgent.indexOf("Safari") > -1) {
					browserName = "Apple Safari";
					browserVersion = userAgent.match(/Version\/(\d+\.\d+)/)[1];
				}

				document.getElementById("browser-name").textContent = browserName;
				document.getElementById("browser-version").textContent = browserVersion;
			}

			// 檢測作業系統
			function detectOS() {
				const userAgent = navigator.userAgent;
				let os = "未知作業系統";

				if (userAgent.indexOf("Windows") > -1) {
					os = "Windows";
					if (userAgent.indexOf("Windows NT 10.0") > -1) os += " 10";
					else if (userAgent.indexOf("Windows NT 6.3") > -1) os += " 8.1";
					else if (userAgent.indexOf("Windows NT 6.2") > -1) os += " 8";
					else if (userAgent.indexOf("Windows NT 6.1") > -1) os += " 7";
					else if (userAgent.indexOf("Windows NT 6.0") > -1) os += " Vista";
					else if (userAgent.indexOf("Windows NT 5.1") > -1) os += " XP";
					else if (userAgent.indexOf("Windows NT 5.0") > -1) os += " 2000";
				} else if (userAgent.indexOf("Mac") > -1) {
					os = "Mac OS";
					if (userAgent.indexOf("Macintosh") > -1) os += " (Intel)";
					if (userAgent.indexOf("Mac OS X") > -1) {
						const version = userAgent.match(/Mac OS X (\d+_\d+_\d+)/);
						if (version) os += " X " + version[1].replace(/_/g, ".");
					}
				} else if (userAgent.indexOf("Linux") > -1) {
					os = "Linux";
				} else if (userAgent.indexOf("Android") > -1) {
					os = "Android";
					const version = userAgent.match(/Android (\d+\.\d+)/);
					if (version) os += " " + version[1];
				} else if (
					userAgent.indexOf("iOS") > -1 ||
					userAgent.indexOf("iPhone") > -1 ||
					userAgent.indexOf("iPad") > -1
				) {
					os = "iOS";
					const version = userAgent.match(/OS (\d+_\d+)/);
					if (version) os += " " + version[1].replace(/_/g, ".");
				}

				document.getElementById("os").textContent = os;
			}

			// 檢測CPU核心數
			function detectCPU() {
				const cores = navigator.hardwareConcurrency || "未知";
				document.getElementById("cpu-cores").textContent = cores;
			}

			// 檢測裝置類型
			function detectDeviceType() {
				const userAgent = navigator.userAgent;
				let deviceType = "未知裝置";

				if (/Mobi|Android|iPhone|iPad|iPod/i.test(userAgent)) {
					deviceType = "移動裝置";
					if (/iPhone|iPad|iPod/i.test(userAgent)) {
						deviceType = "Apple " + (/iPad/i.test(userAgent) ? "iPad" : "iPhone");
					} else if (/Android/i.test(userAgent)) {
						deviceType = "Android 裝置";
					}
				} else {
					deviceType = "桌面裝置";
				}

				document.getElementById("device-type").textContent = deviceType;
			}

			// 匯出JPG功能
			function exportToJPG() {
				const element = document.getElementById("content-to-export");
				const floatBtn = document.querySelector(".float-btn");

				// 顯示載入提示
				floatBtn.innerHTML = '<i class="fas fa-spinner fa-spin text-2xl"></i>';

				// 使用html2canvas截圖
				html2canvas(element, {
					scale: 1,
					logging: false,
					useCORS: true,
					allowTaint: true,
				})
					.then((canvas) => {
						// 創建下載連結
						const link = document.createElement("a");
						link.download = "瀏覽器資訊檢測_" + new Date().toISOString().slice(0, 10) + ".jpg";
						link.href = canvas.toDataURL("image/jpeg", 0.9);
						link.click();

						// 恢復按鈕狀態
						floatBtn.innerHTML = '<i class="fas fa-camera text-2xl"></i>';
					})
					.catch((err) => {
						console.error("匯出JPG失敗:", err);
						floatBtn.innerHTML = '<i class="fas fa-camera text-2xl"></i>';
						alert("匯出JPG時發生錯誤，請重試");
					});
			}
		</script>
	</body>
</html>
